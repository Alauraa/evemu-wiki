<!--
title: Crucible
description: 
published: true
date: 2020-03-19T18:09:21.841Z
tags: server, setup, client, quickstart, guide
-->

<p><strong>The EVEmu project is a developing EVE Online server suite and as yet does not support most features offered in the game.</strong></p><p><br><strong>EVEmu Crucible is compatible with EVE Crucible Client v1.6.5 build 360229.</strong></p><h1>DISCLAIMER</h1><p>EVEmu is an educational project. This means, our primary interest is to learn and teach us and our users more about C++ project development in a large scale. Our software is not intended for running public servers, and we do not support that. We are not responsible for what others do with the source code downloaded from this project. <a href="New_Users_Guide.html">For users who are new</a> to build servers and would like some background information on what they are doing for learning please go <a href="New_Users_Guide.html">here</a><strong>.</strong></p><p>If you are having <a href="Server_Setup_Issues.html">Server Setup Issues</a> look here.</p><h1>Quick Navigation</h1><p>This is a large page with lots of detail for building and setting up the server, building the server's database, and developer-only related information. Use this Quick Navigation panel to get where you want to go.</p><figure class="table"><table><tbody><tr><th>Client and Tools&nbsp;</th><th>Build Server&nbsp;</th><th>Database&nbsp;</th><th>Server Setup&nbsp;</th><th>Developers&nbsp;</th><th>FAQ&nbsp;</th></tr><tr><th><a href="#STEP_1_-_Getting_the_Client">STEP 1 Client</a></th><th><a href="#STEP_3.1_-_Getting_the_source_code">STEP 3.1 Get Src</a></th><th><a href="#STEP_3.4_-_Database_Installation_and_Setup">STEP 3.4 DB</a></th><th><a href="#STEP_3.5_-_Server_Configuration">STEP 3.5 Config</a></th><th><a href="#Crucible_Development">DEV</a></th><th><a href="#Crucible_Known_Issues">ISSUES</a></th></tr><tr><th><a href="#STEP_2_-_Setting_up_your_Build_and_Server_Environment">STEP 2 Setup</a></th><th><a href="#STEP_3.2_-_Compiling_with_CMake">STEP 3.2 CMake</a></th><th><a href="#Data_Import">Data Import</a></th><th><a href="#Finishing_Notes">Finishing Up</a></th><th><a href="#Building_a_Binary_Distribution_Package">DISTROS</a></th><th>&nbsp;</th></tr><tr><th>&nbsp;</th><th><a href="#STEP_3.3_-_Compiling_the_Source_Code_Project">STEP 3.3 Compile</a></th><th><a href="#Final_Checking_of_Database_Integrity">Final Checking</a></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr><tr><th>&nbsp;</th><th>&nbsp;</th><th><a href="#Adding_an_Account">Add Accounts</a></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr><tr><th>&nbsp;</th><th>&nbsp;</th><th><a href="#If_you_have_to_REBUILD_your_Database">Rebuild DB</a></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></tbody></table></figure><h1>PREFACE</h1><p>This guide is meant more for the intermediate programmer and/or computer power user. It is not meant for an average computer user or gamer that just wants to connect to a server and start playing EVE. This guide assumes basic to intermediate knowledge in the following areas. If you find that you do not have this prerequisite knowledge, you will find it nearly impossible to follow this guide on your own and are encouraged to just either go learn about these areas or you don't build the server, setup the database and try to run your own server. You'll just have to "find" one to connect to. As stated in the <a href="#DISCLAIMER">DISCLAIMER</a> above, The EVEmu Project does not host any servers nor does it encourage anyone to do so.</p><p><br>Prerequisites:</p><ul><li>MySQL Server - know how to setup a MySQL server from scratch, administrate it, make/remove accounts, create databases, tables, etc</li><li>Visual Studio - basic use of Visual Studio including opening a project, changing project properites, running build configurations</li><li>Git SCM - basic to intermediate use of Git Source control management system either via a client or command line</li><li>File systems - intermediate use of file systems and directory management on your platform of choice</li></ul><p><br>&nbsp;</p><h1>SUPPORTED PLATFORMS</h1><p><strong>WINDOWS:</strong> Windows builds are currently fully functional. Windows XP, Vista, 7 (32 or 64 bit both work)<br><strong>LINUX:</strong> Linux builds are currently fully functional. Recommended distros: Ubuntu, Debian, really anything.</p><h1>STEP 1 - Getting the Client</h1><ul><li><a href="https://files.evemu.dev/cruc/client/">https://files.evemu.dev/cruc/client/</a> or <a href="http://eve.alasiya.net/misc/">here</a></li></ul><ol><li>Download the <strong>EVE_Online_Installer_360229.exe</strong>, <strong>eveonline_360229_1of2.7z</strong>, and <strong>eveonline_360229_2of2.7z</strong></li><li>Install the client using the .exe</li><li>[WIN] Download the <a href="https://github.com/bluepatcher/blue_patcher/archive/master.zip">blue_patcher ZIP package for Crucible</a></li><li>[MAC] Download the <a href="https://github.com/Reve/blue_patcher_mono/archive/master.zip">blue_patcher ZIP package for Crucible</a></li><li>[MAC] READ THE README otherwise you are doomed to fail <a href="https://github.com/Reve/blue_patcher_mono/blob/master/README.md">blue_patcher Mac Instructions</a></li><li>Finally, follow the instructions in the README.md file to run the patcher and configure your client to connect to a server</li></ol><p><strong><u>NOTE:</u></strong><u> Do NOT run the Client from the icon you get after installation. Change it to run the </u><strong><u>/bin/exefile.exe</u></strong><u> instead of the </u><strong><u>eve.exe</u></strong></p><p>Crucible is no longer available from CCP, so you will have to use the link above to download the currently supported client build for EVEmu Crucible.</p><h1>STEP 2 - Setting up your Build and Server Environment</h1><p>We recommend a nicely organized folder structure for keeping your build area separate from your server execution area in case you need to delete/move either of them. I will also illustrate a good way to keep dependencies of the source code in a separate area than either the source tree or the server execution area.</p><p><u>A note on </u><strong><u>&lt;path_from_root&gt;</u></strong><u> shown below:</u> this is simply the folder path from the base drive letter (C: in Windows, or '/' in linux) to where you want to store your EVEmu development tree. For simplicity for new users/developers, you may simply use C:\ or '/' as your path from root. More complicated paths might be F:\projects\servers\ (windows) or /home/projects/servers/ (linux).</p><h3>Build Environment - Recommended folder structure</h3><ul><li>&lt;path_from_root&gt; - <i>(see note above about &lt;path_from_root&gt;)</i><ul><li>\<strong>evemu</strong><ul><li>\<strong>server</strong><ul><li>\<strong>common</strong> - <i>optional, only if you want to manually specify and maintain the source's dependencies</i><ul><li>this will contain various subdirectories for the server source dependencies, such as mysql, boost, zlib, etc</li></ul></li><li>\<strong>evemu_server</strong><ul><li>this will contain the entire source tree for the server source code</li></ul></li></ul></li></ul></li></ul></li></ul><h3>Server Execution Environment - Recommended folder structure</h3><ul><li>&lt;path_from_root&gt; - <i>(see note above about &lt;path_from_root&gt;)</i><ul><li>\<strong>servers</strong><ul><li>perhaps you run multiple game servers like WoW, EVEmu, etc, LOL</li><li>\<strong>evemu</strong><ul><li>\<strong>bin</strong><ul><li>in here, you'll put the <strong>eve-server.exe</strong> , <strong>libmysql.dll</strong> and <strong>devtools.raw</strong> files</li><li>(<strong>eve-server.exe</strong> you'll find in /builds/src/eve-server/Release)</li><li>(<strong>libmysql.dll</strong> you'll find in /builds/mysql-XXXXXXX/lib)</li><li>(<strong>devtools.raw</strong> you'll find in /utils)</li></ul></li><li>\<strong>etc</strong><ul><li>in here, paste a copy of the <strong>log.ini</strong>, and <strong>eve-server.xml</strong> files you'll find inside the source tree's /utils directory</li></ul></li><li>\<strong>log</strong></li></ul></li></ul></li></ul></li></ul><h1>STEP 3 - Server setup</h1><p><strong>NOTE:</strong> If you have server binaries, then proceed directly to <a href="#STEP_3.4_-_Database_Installation_and_Setup"><strong>STEP 3.4</strong></a></p><ul><li><a href="#STEP_3.1_-_Getting_the_source_code">STEP 3.1</a> - Getting the source code</li><li><a href="#STEP_3.2_-_Compiling_with_CMake">STEP 3.2</a> - Compiling with CMake</li><li><a href="#STEP_3.3_-_Compiling_the_Source_Code_Project">STEP 3.3</a> - Compiling the Source Code Project</li><li><a href="#STEP_3.4_-_Database_Installation_and_Setup">STEP 3.4</a> - Database Installation and Setup</li><li><a href="#STEP_3.5_-_Server_Configuration">STEP 3.5</a> - Server Configuration</li></ul><p><br>&nbsp;</p><h2>STEP 3.1 - Getting the source code</h2><h3>Getting Git</h3><p><strong>LEARN</strong>:</p><ul><li>The best Git primer we've seen is a 1hr 40min video series <a href="http://excess.org/article/2008/07/ogre-git-tutorial/">found here</a></li><li>If you prefer to use Git via command line, here is a good tutorial on how to do it. <a href="http://help.github.com/linux-set-up-git/">Git-Linux</a> <a href="http://help.github.com/win-set-up-git/">Git-Windows</a></li></ul><p><strong>GET</strong>:</p><ul><li>You need a Git client in order to download the source. Windows users can download SmartGit, Linux users need to install the respective package (usually git).</li></ul><p><strong>NOTE:</strong> Use Git to pull down the source, we recommend if you want to develop, create a Github account. Then you can fork from the main branch and develop from there.</p><p>The EVEmu server source code is hosted on <a href="http://www.github.com/">GitHub</a> and uses the Git SCM (Source Control Management) system for revision and branch control. Here is the home page for the latest server source code project:</p><ul><li><a href="http://www.github.com/evemuproject/evemu_server">EVEmu Project - evemu_server</a></li></ul><h3>-----Windows-----</h3><p><strong>GUI route</strong>: Download <a href="http://www.syntevo.com/smartgit/index.html">Smartgit</a> and follow the on screen instructions to pull down the source from github. This guide is not going to contain a primer on how to use SmartGit. Most of our developers use the command line git, so most of this guide is going to be oriented more toward using git on the command line.</p><p><strong>Command Line route</strong>:</p><ul><li>Download and install <a href="http://code.google.com/p/msysgit/">msysgit</a> command line environment for windows</li><li>Run the Git Bash tool to get the git command line</li><li>Using the 'cd' command, navigate to a directory location on your hard drive, such as <strong>C:\evemu\server</strong> and from that location in the command line for Git, type this:</li></ul><p>$ git clone https://github.com/evemuproject/evemu_server.git</p><p>You'll end up with the source tree being copied to the location <strong>C:\evemu\server\evemu_server</strong> and you'll be ready for the next step.</p><h3>-----Linux-----</h3><p>You can use any gui available for Linux. If you prefer terminal, type this:</p><p>$ git clone https://github.com/evemuproject/evemu_server.git</p><p>The source will be downloaded into subdirectory <strong>evemu_server</strong>.</p><h2>STEP 3.2 - Compiling with CMake</h2><p>EVEmu can be built using <a href="http://www.cmake.org/">CMake</a>: a tool designed to ease the whole process of compiling on various platforms. You can find further information about it on the homepage; here we'll concentrate only to how to use it to build EVEmu.</p><h3>Getting the dependencies</h3><h4>-----Windows-----</h4><p><strong>NOTE:</strong> Dependencies are being automatically downloaded, installed, and linked to during the CMake process, so manually downloading, installing, extracting, and pointing CMake to dependencies is OPTIONAL.</p><h5>Tools and Dependencies</h5><p><strong>RECOMMENDED: Visual Studio 2013 with Update 3 has been tested and approved for use on EVEmu.</strong></p><p><br><strong>NOTE: Visual Studio 2012 is EXPERIMENTAL and NOT officially supported by EVEmu yet.</strong></p><figure class="table"><table><tbody><tr><th>Tool&nbsp;</th><th>Visual Studio 2010&nbsp;</th><th>Visual Studio 2012 (tested, experimental)&nbsp;</th><th>Visual Studio 2013 (recommended)&nbsp;</th></tr><tr><th><strong>CMake</strong></th><th><p><strong>CMake:</strong></p><ul><li>Download and Install: <a href="http://www.cmake.org/files/v2.8/cmake-2.8.8-win32-x86.exe">CMake v2.8.8 (win32)</a> - (<a href="http://www.cmake.org/cmake/resources/software.html">main download</a>)</li></ul></th><th><p><strong>CMake:</strong></p><ul><li>Download and Install: <a href="http://www.cmake.org/files/v2.8/cmake-2.8.9-win32-x86.exe">CMake v2.8.9 (win32)</a> - (<a href="http://www.cmake.org/cmake/resources/software.html">main download</a>)</li></ul></th><th><p><strong>CMake:</strong></p><ul><li>Download and Install: <a href="http://www.cmake.org/files/v2.8/cmake-2.8.12.2-win32-x86.exe">CMake v2.12.2 (win32)</a> - (<a href="http://www.cmake.org/cmake/resources/software.html">main download</a>)</li></ul></th></tr><tr><th><strong>Visual Studio for</strong><br><i><strong>32-bit</strong></i><strong> builds</strong></th><th><ul><li>Download and Install: <a href="http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express">Visual Studio 2010 Express ISO</a></li><li>Download and Install: <a href="http://www.microsoft.com/en-us/download/details.aspx?id=23691">VS 2010 Express SP1</a></li></ul></th><th><ul><li>Download and Install: <a href="http://www.microsoft.com/en-us/download/details.aspx?id=34673">Visual Studio 2012 Express for Windows Desktop</a></li><li>Download and Install: <a href="http://www.microsoft.com/en-us/download/details.aspx?id=39305">VS 2012 Update 4</a></li></ul></th><th><ul><li>Download and Install: <a href="http://www.visualstudio.com/downloads/download-visual-studio-vs#d-express-windows-desktop">VS 2013 Express 2013 for Windows Desktop</a></li><li>Download and Install: <a href="http://www.microsoft.com/en-us/download/details.aspx?id=43721">VS 2013 Update 3</a></li><li><strong>TO BE TESTED:</strong> <a href="http://www.visualstudio.com/downloads/download-visual-studio-vs#d-express-windows-desktop">VS 2013 Update 4</a></li></ul></th></tr><tr><th><strong>Visual Studio for</strong><br><i><strong>64-bit</strong></i><strong> builds</strong></th><th>Get <a href="http://www.microsoft.com/en-us/download/details.aspx?id=2680">Windows SDK for VS 2010</a></th><th>Get <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30668">Windows SDK for VS 2012</a></th><th>Get <a href="http://www.microsoft.com/en-us/download/details.aspx?id=40758">Windows SDK for VS 2013</a></th></tr><tr><th><strong>Notes</strong></th><th>none&nbsp;</th><th>none&nbsp;</th><th><a href="http://blogs.msdn.com/b/zainnab/archive/2013/08/28/visual-studio-2013-working-in-the-breakpoints-window.aspx">Enable Breakpoints Windows</a></th></tr></tbody></table></figure><ul><li>Download and Install: <a href="http://code.google.com/p/msysgit/downloads/list">Git For Windows CMD</a></li></ul><h4>-----Linux-----</h4><ul><li>cmake</li><li>git</li><li>make</li><li>g++</li><li>zlib, zlib-dev</li><li>libmysqlclient, libmysqlclient-dev</li><li>boost-build, libboost-dev</li></ul><p><strong>NOTE:</strong> Just search your distro's repository for similarly named packages and install them.</p><h5>Linux Mint 14</h5><p>This list of dependencies and procedures is for Linux Mint v14, specifically, which is based on Ubuntu, based on Debian, however, it may work for other Ubuntu-based distributions.</p><ul><li>cmake</li><li>git</li><li>make</li><li>g++</li><li>libmysqlclient-dev</li><li>zlib1g</li><li>zlib1g-dev</li><li>libboost-all-dev</li></ul><p>This last is optional as you could just let CMake install boost for you.</p><h3>Running CMake</h3><p><strong>WARNING: Do NOT use SPACES in any part of your path to the EVEmu source code or any of its dependencies (libraries like boost, mysql, zlib, etc). Any spaces in the path will cause MASSIVE errors when you go to compile the software in your compiler. YOU HAVE BEEN WARNED!!</strong></p><h4>-----Windows-----</h4><p>Create directory <strong>C:\evemu\server\evemu_server\build</strong>.</p><p>Go to the directory where you have installed CMake, there should be subdirectory bin. Go in there and run cmake-gui.exe.</p><p>In the edit box labeled <strong>Where is the source code:</strong>, click Browse source and pick <strong>C:\evemu\server\evemu_server</strong></p><p>In the edit box labeled <strong>Where to build the binaries:</strong>, click Browse build and pick <strong>C:\evemu\server\evemu_server\build</strong></p><p>Now, click Configure button in the lower-left part. Another dialog pops up, asking you to choose compilers and a generator. Choose Visual Studio 10 2010, then use default native compilers and press Finish.</p><p>CMake starts configuring your build.</p><p><br>&nbsp;</p><h5>CMake Manual Dependency Configuration - (if Cmake fails to download them)</h5><p><strong>STATUS - The ability to manually configure the location for depenencies is now broken due to changes made to the CMake build configuration that now automatically downloads, extracts, installs, and links to all dependencies used by the source. A solution is being worked that will allow us to disable this automatic process in favor of a fully manual dependency management option for at least the big three dependencies: boost, mysql, and zlib.</strong></p><p>If Manual Dependency Management is enabled, Configure will fail, because you haven't set several CMake variables yet. For each of the rows below, click the button Add Entry in the upper part, fill in the corresponding editboxes and click OK:</p><p>Choose advance tab in cmake, The very first line should be Boost_include_DIR. Please update it to your path for Boost.</p><p>Name: CMAKE_SYSTEM_INCLUDE_PATH Type: PATH Value: C:\evemu\server\common\mysql\include;C:\evemu\server\common\zlib Name: CMAKE_SYSTEM_LIBRARY_PATH Type: PATH Value: C:\evemu\server\common\mysql\lib\opt Name: Boost_INCLUDE_DIR Type: PATH Value: C:\evemu\server\common\boost</p><p>Now click Configure again and it should be fine. After configuration is done, click Generate and close the window.</p><p><strong>IMPORTANT</strong>: Be sure there are NO red errors in the log window at the bottom of the CMake window. If there are any, take a look at them to see if they merit reporting to developers or if they are simply reporting the failure to configure something that you did not select for being configured, such as doxygen or eve-tool.</p><p>Finally, you can now open the EVEmu server solution in Visual Studio. Just make sure to open it in the same version of Visual Studio that you told CMake to use when you setup the CMake build.</p><h4>-----Linux-----</h4><p>Type:</p><p>$ mkdir path/to/evemu/server/evemu_server/build $ cd path/to/evemu/server/evemu_server/build $ cmake ../.</p><p>If you want to configure the build manually, such as select Release or Debug build profiles, run this command:</p><p>$ cmake -i path/to/evemu/server/evemu_server</p><p>Alternatively, you can use the curses-based CMake (assuming you have it installed):</p><p>$ ccmake path/to/evemu/server/evemu_server</p><p>This is particularly useful e.g. when you want to build a Debug binary.</p><h2>STEP 3.3 - Compiling the Source Code Project</h2><h3>Building the Server from Source</h3><h4>-----Windows-----</h4><p>Browse to C:\evemu\server\evemu_server\build, there should be a file <strong>evemu.sln</strong>. Double-click it and Visual Studio opens up. You can set it to two modes, <strong>Debug</strong> or <strong>Release</strong> by choosing a selection from a drop-down menu near the center of the toolbar. Depending on your OS platform, you may want to choose between 32-bit and 64-bit using the drop-down menu to the right of the Release/Debug drop-down.</p><p>Either Debug or Release build will work, but the Debug build's exe is much larger and much slower in performance due to all the debug symbols and extra code to support debugging that gets built into the exe. If you want to run the server and not debug at all, use the Release build as it will be much smaller in size and much faster.</p><p>In the left file/folder tree view called <i>Solution Explorer</i>, right-click Solution evemu and click Build solution. Compilation should start.</p><h4>-----Linux-----</h4><p>Type:</p><p>$ cd path/to/evemu/server/evemu_server/build $ make</p><p>If you want to make use of a multicore CPU, specify number of cores with -j option. For example, if you had quad-core CPU, you'd type:</p><p>$ make -j4</p><h3>Running the Server</h3><p>You will need an eve-server.xml file in an etc/ directory, a log/ directory, and a bin/ directory somewhere or just use the location where eve-server.exe (eve-server in linux) is placed by CMake and Visual Studio (cmake and make on linux). On windows, you'll need the libmysql.dll in the same location as eve-server.exe. You can now run eve-server executable from its location.</p><p><strong>NOTE TO LINUX USERS: You will need to do one of two things regarding the API Server IP port:</strong></p><ul><li>Change eve-server.xml to specify a port number of &gt; 1024 for the API Server (you will NOT be able to use EFT with this server)</li><li>Run eve-server executable as root using port 64 if you want to be able to use EFT with this server</li></ul><h3>Debugging the Server</h3><p><strong>NOTE: Make sure you selected the DEBUG build profile in Visual Studio or Linux CMake and build the server. You will NOT be able to debug if you built it with the RELEASE build profile.</strong></p><p>These instructions will help you surmount the common problems when setting up your system to debug EVEmu server code.</p><p>Skip to <a href="#STEP_3.4_-_Database_Installation_and_Setup">STEP 3.4 - Database Installation and Setup</a> if you are not interested in developing code for this project and just want to run the server.</p><h4>-----Windows-----</h4><ol><li>Open the evemu project in Visual Studio.</li><li>To do FULL Rebuilds of entire project, select <strong>ALL_BUILD</strong> at the top of the list in <strong>Solution Explorer</strong>, then either hit Ctrl+Alt+F7 key or click Build -&gt; Rebuild Solution from the menu bar.</li><li>To compile sub-projects by themselves, such as <strong>eve-server</strong>, then select that sub-project in <strong>Solution Explorer</strong>, then hit F7 for a Build or Ctrl+Alt+F7 for a Rebuild or access either from the Build menu on the menu bar.</li><li>To set the project for <strong>Debugging</strong>, find the drop down box on the toolbar that is either going to have <strong>Release</strong> or <strong>Debug</strong> inside. If it says <strong>Debug</strong> you are good to go, just do a FULL rebuild of the whole project. If it says <strong>Release</strong>, click on it then select <strong>Debug</strong>, then do a FULL rebuild of the whole project.</li><li>To RUN eve-server after you have built it under <strong>Debug</strong> or <strong>Release</strong>, follow these steps:<ol><li>Right-click on <strong>eve-server</strong> in the <strong>Solution Explorer</strong> and select <strong>Properties</strong></li><li>Expand <strong>Configuration Properties</strong> and click <strong>Debugging</strong></li><li>Put the text <strong>Debug</strong> in the field called <strong>Working Directory</strong>, then click the <strong>OK</strong> button<ul><li>If you are building <strong>Release</strong>, then set the <strong>Working Directory</strong> to <strong>Release</strong>, then click the <strong>OK</strong> button</li><li>You can set both by choosing either <strong>Debug</strong> or <strong>Release</strong> in the drop-down box labeled <strong>Configuration:</strong> in the upper left corner of the <strong>eve-server Property Pages</strong></li></ul></li><li>Now, navigate to your server project source root directory, then drill down to this sub-folder: <strong>build\src\eve-server</strong></li><li>Make a new folder called <strong>etc</strong> and put your <strong>eve-server.xml</strong> file in that new <strong>etc</strong> folder. You can copy and modify the provided example eve-server.xml found inside the /utils subdirectory off the root of the source tree.</li><li>Make a new folder called <strong>log</strong> and put your <strong>log.ini</strong> file in that new <strong>log</strong> folder. You can copy and modify the provided example log.ini found inside the /utils subdirectory off the root of the source tree.</li><li>Back in Visual Studio, right click on <strong>eve-server</strong> again in the <strong>Solution Explorer</strong> and select <strong>Set as StartUp Project</strong>, the <strong>eve-server</strong> tree label will now be bold to indicate this change</li><li>You can now hit F5 to execute the debug build .exe or click Debug -&gt; Start Debugging from the menu bar.</li></ol></li></ol><h4>-----Linux-----</h4><h5>Using KDevelop and KDbg</h5><p>Install KDevelop4 or later and KDbg on your KDE system. If your linux system is not KDE, get KDE and use it. The KDE window manager is the most like windows and has the most GUI applications available for it compared to almost all other window managers outside of Gnome.</p><p>Start KDevelop and click the Open Project... button along the row of buttons on the green start page. You can also select Project menu -&gt; Open/Import project... In this dialog, navigate to the evemu_server directory in which the entire git repository has been cloned and select the CMakeLists.txt file, then click Next. Verify on this next page that Name = evemu_server and Build System = CMake Project Manager and then click Finish.</p><p>It will take quite a while to load the first time and eventually you'll see some buttons along the far left side of the GUI. Click Projects and you'll see a top folder 'evemu-server' inside of which you'll see the entire tree of files as you would in a file manager.</p><p>You'll now want to setup a Launch configuration. Click Run menu -&gt; Configure Launches. In this dialog, if there is not already a 'New Native Application Configuration' under 'evemu_server', then click the + button at the top of the list to add one. In the area on the right where it says <strong>Executable</strong>, fill in the full path to the 'eve-server' executable under build/src/eve-server from the evemu_server root path including the eve-server executable name, such as</p><p>/home/myusername/projects/evemu_server/build/src/eve-server/eve-server</p><p>In the area where it says <strong>Working Directory</strong>, fill in the full path to the folder where the 'eve-server' executable was placed after 'make' completed, such as:</p><p>/home/myusername/projects/evemu_server/build/src/eve-server</p><p>In the middle group <i>Behavior</i> check the box at the bottom of this group next to <strong>Use External Terminal</strong></p><p>Click the <strong>Debug</strong> selection under the new launch configuration at left. In this area at right where it says <strong>Debugger executable</strong>, make sure it is empty as we want KDevelop to invoke by default Kdbg with gdb in the background.</p><p>Click Apply and OK to save and close.</p><p>You can now click the Execute or Debug buttons at the top of the KDevelop GUI just under the menu bar. <strong>Execute</strong> will simply run the server while Debug will open KDbg on eve-server to initiate debugging of the server application.</p><p><strong>TODO: more to follow when we actually are successful in loading KDbg with eve-server and its debug symbols</strong></p><h5>If you are a sado-masichist and enjoy massive amounts of pain</h5><p>Assuming you've used the <strong>Debug</strong> build configuration, just use GDB:</p><p>$ gdb build/src/eve-server/eve-server</p><h3>If you want to REBUILD your source code</h3><p>Whenever you update your source code working tree from the github repository, add files to the project (which requires adding them to the CMakeLists.txt files), or change one of the .xmlp files found in /src/eve-common/packets/xmlp, you MUST do a full REBUILD of your source code to ensure that all changes and new files are made available to the compiler. Here's how you do that:</p><p>REBUILD source: This is simply accomplished by closing Visual Studio, opening CMake, clicking Configure twice, then Generate once, and finally opening Visual Studio again. Now, you need to right-click on the ALL_BUILD project, and click Rebuild. This will rebuild your entire source code from scratch using any new files or modified packet xmlp files that were added/modified by either you or whomever pushed changes to the github repository that you just pulled down.</p><h4>------Linux------</h4><p>If you've already imported your CMake project into KDevelop as described above under Debugging the Server, then you can both select which build profile you want CMake to use (Debug or Release) and invoke CMake configure and Build the eve-server project. Here's how:</p><h5>Change CMake Build Profile</h5><p>In KDevelop, right-click the evemu_server folder at the top of the tree at left in the Projects window and select Open Configuration... at the bottom of the popup menu. In here, you can change the <strong>CMAKE_BUILD_TYPE</strong> variable to be either <strong>Debug</strong> or <strong>Release</strong> typed exactly as shown right here. Click OK to set it and if you changed anything, KDevelop will invoke CMake to do the project configure to update the makefile with your changes.</p><h5>Build the eve-server project</h5><p>In KDevelop, once you've set your CMake build profile, you can just click Project menu -&gt; Build Selection or hit the F8 key. This will take a long time. If you need to run CMake configure first, click Project menu -&gt; Configure selection and CMake will run. Then you can click Project menu -&gt; Build selection or hit F8 key to build.</p><h2>STEP 3.4 - Database Installation and Setup</h2><p><strong>NOTE:</strong> This guide assumes directory structure created in compiling with cmake guide.</p><h3>Properly setup your MySQL server</h3><p>You need to properly setup your MySQL server <strong>before</strong> you attempt to build the database following the instructions we present below, so go open up your <strong>my.ini</strong> (windows) or <strong>my.conf</strong> (linux) in a text editor. Find the following parameters and set them to the values you see in the following list. If they are not present in the file, add them. Please do a search FIRST before adding them, you may have just missed them scrolling by.</p><ul><li>under <strong>[mysqld]</strong><ul><li><strong>max_allowed_packet = 1000M</strong></li><li><strong>key_buffer = 256M</strong></li></ul></li><li>under <strong>[mysqldump]</strong><ul><li><strong>max_allowed_packet = 1000M</strong></li></ul></li></ul><p>Save the file and close it. <strong>Restart your MySQL server before proceeding to build the database.</strong></p><p><br>&nbsp;</p><h3>Required Software</h3><ul><li>MySQL server - <strong>NO LATER THAN v5.5.x</strong><ul><li>Intermediates: <a href="http://www.apachefriends.org/en/xampp.html">Get XAMPP</a> - XAMPP is your friend, has apache, mysql, php, and lots more, already configured, ready to go with a bit of setup, but they have instructions to help you</li><li>EXPERTS ONLY: <a href="http://dev.mysql.com/downloads/mysql/5.1.html#win32">MySQL Server 5.1</a> (It's recommend downloading the Windows Essentials installer, as it is all that is needed)</li></ul></li><li><a href="http://builds.evemu.org/crucible_360229/database/evemu.7z"><s>Crucible v1.6 MySQL conversion from Official DB dump</s></a> - hosted by the EVEmu team <i>Redundent</i></li><li><a href="http://zofu.no-ip.de/cru16/cru16-mysql5-v1.sql.bz2"><s>Crucible v1.6 MySQL conversion from Official DB dump</s></a> - <i>Deactivated</i></li><li><a href="http://eve.alasiya.net/misc/cru16-mysql5-v1.sql.bz2">http://eve.alasiya.net/misc/cru16-mysql5-v1.sql.bz2</a> - Currently down</li><li><a href="http://192.228.108.100/~evemu/evemu/cru16-mysql5-v1.sql">http://192.228.108.100/~evemu/evemu/cru16-mysql5-v1.sql</a> - Current</li><li>&nbsp;<ul><li><strong>This is the last database update for Crucible</strong>: CCP's most recent release of the Database Dump is Crucible 1.6, <strong>therefore we use this</strong></li><li>We keep a watch on <a href="http://wiki.eve-id.net/CCP_Toolkit_Release_History">CCP's Toolkit site</a> for DB dump updates</li></ul></li></ul><h3>Database Setup</h3><p>Download and install the latest stable version of MySQL 5.5.x or install a whole web server package like <a href="http://www.apachefriends.org/en/xampp.html">XAMPP (recommended)</a> from the links above.</p><p>Extract the dowloaded database dump to directory <strong>C:\evemu\server\evemu_server\sql</strong>. Browse into <strong>C:\evemu\server\evemu_server\sql\utils</strong>.</p><p><strong>If you are on Windows:</strong> In the <strong>/sql/utils/</strong> directory, Execute merge-ofic-updates.bat.</p><p><strong>If you are on Linux:</strong> In the <strong>/sql/utils/</strong> directory, Execute merge-ofic-updates.sh.</p><p>This should create new file called ofic-updates.sql in parent directory sql.</p><p>Now, you'll have these .sql files in the /sql directory:</p><ul><li>cru16-mysql5-v1.sql</li><li>evemu_dynamic-dump.sql</li><li>evemu_static-dump.sql</li><li>ofic-updates.sql</li><li>prime_db.sql</li><li>./evemu-updates/liveupdates.sql</li></ul><p><strong>NOTE:</strong> cru16-mysql5-v1.sql.sql is the biggest sql and takes the longest to write into the database, over 460 MB import.</p><h3>Data Import</h3><p><strong>WARNING!</strong> It is recommended that you DO NOT use mysql tools such as Navicat, phpmyadmin, etc to do the SQL import on any of these SQL files as those tools "may" truncate some of the larger queries in these files. If you know that your tool of choice does not do this, you should be fine. This is a word of warning to those who will use tools like these and wonder why their databases are not built correctly, meaning they are missing whole tables or get other strange SQL-related errors when starting up the server or during character creation and login.</p><p><strong>IMPORTANT:</strong> Paths should use / instead of \</p><p>First, make sure you put the path to your MySQL 'bin' folder in your PATH environment variable.</p><p>Open a command prompt and change directory to the C:\evemu\server\evemu_server\sql directory and run mysql in that prompt like this:</p><p>C:\evemu\server\evemu_server\sql&gt; mysql -u &lt;username&gt; -p</p><p>where <strong>&lt;username&gt;</strong> is your mysql database username, then type the password and hit enter. You will see a "mysql&gt;" prompt, now you can create database and source the sql files using instructions below.</p><p>You will now need to create the EVEmu database, to do this type at the mysql command prompt:</p><p>create database evemu;</p><p>Now hit enter, it should tell you that was successful by saying:</p><p>Query OK, 1 row affected.</p><p>INFO: Don't panic if you get multiple messages like this. It's normal and it usually takes a while to setup. (30 mins or so)</p><p>After each query is completed it will display mysql&gt; - at this point simply run the next one.</p><h4>Automated SQL Setup</h4><p>To build the database in one command, you first need to copy the "cru16-mysql5-v1.sql" file into the /sql dir of the source, where the other sql files are located.</p><p>Open a command prompt IN the sql/ directory so you are local to all the sql files the following script needs access to and run the following command:</p><p>evemu_build_database.bat &lt;mysql_username&gt; &lt;mysql_password&gt; evemu</p><p><strong>If this completes without errors, your database is completely setup. Now, proceed to "Final Checking of Database Integrity".</strong></p><h4>Manual Execution of each SQL piece</h4><p>If you have trouble for one reason or another using the automated setup, then try using these manual steps in the mysql command prompt to setup your database.</p><p>Now to import the actual data... to do this you'll need to use the following queries (each line is a separate query - <strong>don't execute them all at once!</strong>):</p><p>use evemu; source C:/evemu/server/evemu_server/sql/cru16-mysql5-v1.sql; source C:/evemu/server/evemu_server/sql/ofic-updates.sql; source C:/evemu/server/evemu_server/sql/evemu_static-dump.sql; source C:/evemu/server/evemu_server/sql/evemu_dynamic-dump.sql; source C:/evemu/server/evemu_server/sql/prime_db.sql; source C:/evemu/server/evemu_server/sql/liveupdates.sql;</p><h3>Final Checking of Database Integrity</h3><p>There are some final checks on your database that are highly recommended that you perform in order to ensure your database was 100% correctly setup in the previous steps. These are listed below:</p><ol><li>Check the <strong>AUTO_INCREMENT</strong> value in the <strong>entity</strong> table to make sure it is set to this value: <strong>140000000</strong>. If it is not set to that value, change it to this value <strong>140000000</strong>. If you do not, you may experience a server crash when you make your first character, so DO check it and set it if it is not the correct value. A common error that you may encounter if you miss this step is something like this in the server console due to the fact that the <strong>AUTO_INCREMENT</strong> was not set and the last itemID was<strong>61000003</strong> or something.</li></ol><p>InventoryDB::GetItem(..\..\..\src\eve-server\inventory\InventoryDB.cpp:471): Item 61000004 not found</p><h3>Adding an Account</h3><p>This is really simple... just type the following:</p><p>INSERT INTO account (accountID, accountName, role, password, online, banned) VALUES(NULL, 'your_account_name', 5003499186008621056, 'your_password', 0, 0);</p><p>Simply make sure to replace your_account_name and your_password with what you want your username and password to be!</p><p><strong>NOTE:</strong> For further reading and reference, the role value indicated in the above query was generated after some research and can be seen <a href="EVEmu_Account_Roles.html">in this article on Roles after the Incursion and later table</a>, we've called it "ROLEMASK_GRAVY".</p><p>If you are new to MySQL command line, you can try using Navicat Lite <a href="http://www.wizdownloads.com/download/Windows/navicat-lite/">http://www.wizdownloads.com/download/Windows/navicat-lite/</a> it has an easy to use interface.</p><h3>If you have to REBUILD your Database</h3><p>If you somehow corrupt your database or the server does it as a result of a crash or wrong SQL query in the code, or you need to rebuild it due to development actions taken that modified SQL files found in the source's /sql directory, here's what we mean by "REBUILD":</p><p>REBUILD database: This is simply "dropping" the entire evemu database in mysql, such that the database is completely deleted, as in, the database name is no longer visible or accessible. Then, the database is built again from scratch by first creating a new database with the name you used before, switching to that database and running the "evemu_setup_database.sql" file on it. So, this basically means that you proceed directly to the "Data Import" section above on this page AFTER you have DROPPED your complete database from MySQL either using a MySQL client to do it (phpmyadmin, navicat, MySQL Workbench, etc) or by using the mysql command line as follows:</p><p>mysql&gt; drop database evemu;</p><p><strong>WARNING: MySQL does NOT prompt you on the command line, when you hit enter, it's too late, no going back. So, if you NEED to backup your database, do an export of the whole thing first.</strong></p><h3>Tweak your MySQL Server Settings for Optimum Performance</h3><p>Have a look at these articles for advice on how to tweak your MySQL Server settings for optimum performance of your server:</p><ul><li><a href="http://www.mysqlperformanceblog.com/2006/09/29/what-to-tune-in-mysql-server-after-installation/">What to tune in MySQL Server after installation</a></li><li><a href="http://github.com/rackerhacker/MySQLTuner-perl">MySQLTuner-perl script</a> - monitors use of your mysql server over a long time to recommend tweaks to obtain optimum performance</li></ul><p><br>&nbsp;</p><h2>STEP 3.5 - Server Configuration</h2><p><strong>NOTE:</strong> This guide assumes directory structure where you have git cloned the <strong>evemu_server</strong> project into <strong>C:\projects</strong> resulting in a path of <strong>C:\projects\evemu_server</strong> for the source tree.</p><p>To get the server up and running correctly, you will need to put various files in the correct places, and make modifications to some of them.</p><h3>Directory Setup</h3><ol><li>Create a location for your server binaries and cache files, such as <strong>C:\evemu_server</strong>, create the folders <strong>bin</strong>, <strong>etc</strong>, <strong>log</strong> and <strong>server_cache</strong></li><li>Copy <strong>eve-server.exe</strong> from <strong>C:\projects\evemu_server\build\src\eve-server\Release</strong> to <strong>C:\evemu_server\bin</strong></li><li>Copy <strong>libmysql.dll</strong> and <strong>libmysqld.dll</strong> from <strong>C:\projects\evemu_server\build\mysql-5.x.x-xxxx\lib</strong> to <strong>C:\evemu_server\bin</strong><ul><li>An example would be <strong>C:\projects\evemu_server\build\mysql-5.5.25a-win32\lib</strong></li></ul></li><li>Copy <strong>eve-server.xml</strong> from <strong>C:\projects\evemu_server\utils</strong> to <strong>C:\evemu_server\etc</strong></li></ol><h3>File Setup</h3><p>Browse to <strong>C:\evemu_server\log</strong> and create empty text file named <strong>eve-server.log</strong> Browse to <strong>C:\evemu_server\etc</strong> and create empty text file named <strong>log.ini</strong> <strong>_OR_</strong> use the sample <strong>log.ini</strong> file in the source code. After that go to <strong>C:\evemu_server\etc</strong> and open <strong>eve-server.xml</strong> in your favorite text editor, You will need to change 2 sets of settings separated by &lt;&gt; tags (there are many optional settings to mess around, if you know what you are getting your hands into).</p><p><strong>Remember:</strong> Every set up is different so use your own setting and don't copy and paste!</p><p>We will assume you have followed the previous step of setting up the database and we will go ahead and show an example of the needed changes:</p><h4>Database Tag Changes</h4><p>Default:</p><p>&lt;database&gt; &lt;host&gt;127.0.0.1&lt;/host&gt; &lt;username&gt;eve&lt;/username&gt; &lt;password&gt;eve&lt;/password&gt; &lt;db&gt;eve&lt;/db&gt; &lt;!--&lt;port&gt;3306&lt;/port&gt;--&gt; &lt;/database&gt;</p><p>Example:</p><p>&lt;database&gt; &lt;host&gt;127.0.0.1&lt;/host&gt; &lt;username&gt;root&lt;/username&gt; &lt;password&gt;password&lt;/password&gt; &lt;db&gt;evemu&lt;/db&gt; &lt;!--&lt;port&gt;3306&lt;/port&gt;--&gt; &lt;/database&gt;</p><p><strong>NOTE:</strong> You will need to insert your own MySQL username and password</p><p><strong>NOTE:</strong> Please make sure a password is set or client will stop after trying to connect</p><h4>Net Tag Changes</h4><p>Default:</p><p>&lt;net&gt; &nbsp; &nbsp;&lt;!-- &lt;port&gt;26000&lt;/port&gt; --&gt; &nbsp; &nbsp;&lt;!-- &lt;imageServerPort&gt;26001&lt;/imageServerPort&gt; --&gt; &nbsp; &nbsp;&lt;!-- &lt;imageServer&gt;localhost&lt;/imageServer&gt; --&gt; &nbsp; &nbsp;&lt;!-- &lt;apiServerPort&gt;26002&lt;/apiServerPort&gt; --&gt; &nbsp; &nbsp;&lt;!-- &lt;apiServer&gt;localhost&lt;/apiServer&gt; --&gt; &lt;/net&gt;</p><p>Example(Must be 26000):</p><p>&lt;net&gt; &nbsp; &nbsp;&lt;port&gt;26000&lt;/port&gt; &nbsp; &nbsp;&lt;imageServerPort&gt;26001&lt;/imageServerPort&gt; &nbsp; &nbsp;&lt;imageServer&gt;localhost&lt;/imageServer&gt; &nbsp; &nbsp;&lt;apiServerPort&gt;26002&lt;/apiServerPort&gt; &nbsp; &nbsp;&lt;apiServer&gt;localhost&lt;/apiServer&gt; &lt;/net&gt;</p><h4>Files Tag Changes</h4><p>Default:</p><p>&lt;files&gt; &nbsp; &nbsp;&lt;!-- &lt;logDir&gt;../log/&lt;/logDir&gt; --&gt; &nbsp; &nbsp;&lt;!-- &lt;logSettings&gt;../etc/log.ini&lt;/logSettings&gt; --&gt; &nbsp; &nbsp;&lt;!-- &lt;cacheDir&gt;&lt;/cacheDir&gt; --&gt; &lt;/files&gt;</p><p>Example:</p><p>&lt;files&gt; &nbsp; &nbsp;&lt;logDir&gt;../log/&lt;/logDir&gt; &nbsp; &nbsp;&lt;logSettings&gt;../etc/log.ini&lt;/logSettings&gt; &nbsp; &nbsp;&lt;cacheDir&gt;../server_cache&lt;/cacheDir&gt; &lt;/files&gt;</p><p>The <strong>../log/eve-server.log</strong> will contain the text from the eve-server console window. The <strong>../etc/log.ini</strong> file contains settings to control how eve-server outputs messages to the log. We need more definition as to what goes in this file. Finally, the <strong>../server_cache</strong> directory is where the server will create files for all cached objects when the server starts up.</p><p><strong>NOTE:</strong> If any cached database tables change during server down-time, you MUST delete ALL cache files in this directory BEFORE starting up the server again. The server does not check to see if the tables changed.</p><h3>Keeping The Server Updated</h3><p>The Evemu core updates very often. To keep your server up to date with the current Evemu revision; you must perform a simple core update and recompile.</p><ol><li>Use your favorite git gui or the git command line to keep your source up to date</li><li>Re-run CMake just in case new files were added or old files were removed.</li><li>You must now rebuild you solution to actually see the changes in game.</li><li>Run the "evemu" sln with C++ and rebuild the solution <strong>MUST BE SET ON 'DEBUG' or 'RELEASE' (the question of your choice - for now is just a size of exe file on exit. No any stability or workability differences for now,except of some crashes,caused by svcerror and beancount errors on release binary.</strong></li></ol><h2>Finishing Notes</h2><h3>Windows</h3><p>Then you should be able to run eve-server.exe to start the server. The server log will be stored in C:\evemu\log\eve-server.log if you need it. Wait for the message&nbsp;: "Init Done" before initiating any action associated with the server(Even opening a client). <a href="http://evemu.sourceforge.net/forums/viewtopic.php?t=470">See here</a> for an old forum thread that discusses eve-server restart scripts in the cases where the server crashes, somewhere down the page is a script for windows.</p><h3>Linux</h3><p>You can just run the eve-server executable in your build directory, or you can use a script to run it, even to restart it if it ever crashes. <a href="http://evemu.sourceforge.net/forums/viewtopic.php?t=470">Here is a forum thread</a> that lists several different scripts on how the eve-server can be restarted if it crashes.</p><h2>FAQ</h2><p>You will find it under <a href="Crucible_FAQ.html">Crucible FAQ</a></p><h1>Crucible Development</h1><p>Information will be soon here.</p><h2>Building a Binary Distribution Package</h2><p>TBD</p><h1>Crucible Known Issues</h1><p>[FIXED] == Undocking == There are some cases when the location is not stored in the Data Base and when you try to undock it will give a DB error in server log.</p><ul><li>Workaround - Just select another station from the top left menu and transolacate there (tr command in right click menu) or choose another system from the map and do the same.</li></ul><h2>Right click on ship not responding</h2><ul><li>Workaround - Just undock and re-dock and this issue will go away.</li></ul><p><br>If you are having <a href="Server_Setup_Issues.html">Server Setup Issues</a> look here.</p>